<h2>Dữ liệu môi trường</h2>
<div class="table-responsive small">
    <table class="table table-striped table-sm" id="env-table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Độ ẩm</th>
                <th scope="col">PM2.5</th>
                <th scope="col">Amoniac (NH<sub>3</sub>)</th>
                <th scope="col">Mùi trứng thối (H<sub>2)</sub>S</th>
            </tr>
        </thead>
        <tbody>
            <% envData.forEach((env) => { %>
                <tr>
                    <td><%= new Date(env.timestamp).toLocaleString("vi-VN") %></td>
                    <td><%= env.hum %></td>
                    <td><%= env.pm25 %></td>
                    <td><%= env.nh3 %></td>
                    <td><%= env.h2s %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</div>

<script>
  // Khi server bắn dữ liệu mới
  socket.on("new_environment", (env) => {
    // console.log("new socket received:", env);

    const table = document.querySelector("#env-table tbody");
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${new Date(env.timestamp).toISOString()}</td>
      <td>${env.hum}</td>
      <td>${env.pm25}</td>
      <td>${env.nh3}</td>
      <td>${env.h2s}</td>
    `;
    table.prepend(row); // thêm lên đầu
  });
</script>
